<div id="ItemsId">
  <div class="row">
    <div class="col-sm-12">
      <div class="content-header ivf-content-header"> </div>
    </div>
  </div>

  <!--DATA-TABLE-->
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-body">

          <!--ADD BUTTON-->
          <div class="card-block">
            <button (click)="addNewRow()" class="btn btn-raised btn-success mr-1 shadow-z-2"
              [(disabled)]="!isUpdateMode">
              <i class="ft-plus mr-2"> Add</i>
            </button>
          </div>

          <div class="card-block">
            <!-- <form class="form" (ngSubmit)="onFormSubmit()" #submitItemForm="ngForm"> -->
            <ngx-datatable class="bootstrap" [rows]="itemList" [columnMode]="'force'" [headerHeight]="50"
              [footerHeight]="50" [rowHeight]="'auto'" [limit]="searchingObject.size" [externalPaging]="true"
              [count]="dataTableCount" [offset]="searchingObject.page" (page)="setPage($event)">

              <!-- Row Panel Template -->
              <ngx-datatable-row-detail [rowHeight]="100" #myDetailRow>
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-row-detail-template>
                  <div>TEST TEST</div>
                </ng-template>
              </ngx-datatable-row-detail>

              <ngx-datatable-column name="itemno">
                <ng-template let-column="column" ngx-datatable-header-template>
                  <input type="text" class="managetextfilter" placeholder="{{ 'itemno' | transloco }}"
                    (keyup)="updateFilter($event, 'itemno')" />
                </ng-template>

                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                  <mat-form-field>
                    <input matInput value="itemno" [(ngModel)]="row.itemno" #itemno="ngModel"
                      [disabled]="!isEditable[rowIndex] || !isAddMode[rowIndex]" required />

                    <mat-error class="form-text text-muted danger">This field is required</mat-error>
                  </mat-form-field>
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="itemnamee">
                <ng-template let-column="column" ngx-datatable-header-template>
                  <input type="text" class="managetextfilter" placeholder="{{ 'itemnamee' | transloco }}"
                    (keyup)="updateFilter($event, 'itemnamee')" />
                </ng-template>
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                  <mat-form-field>
                    <input matInput value="itemnamee" [(ngModel)]="row.itemnamee" #itemnamee="ngModel"
                      [disabled]="!isEditable[rowIndex]" required />

                    <mat-error class="form-text text-muted danger">This field is required</mat-error>
                  </mat-form-field>
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="itemnamea">
                <ng-template let-column="column" ngx-datatable-header-template>
                  <input type="text" class="managetextfilter" placeholder="{{ 'itemnamea' | transloco }}"
                    (keyup)="updateFilter($event, 'itemnamea')" />
                </ng-template>
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                  <mat-form-field>
                    <input matInput value="itemnamea" [(ngModel)]="row.itemnamea" #itemnamea="ngModel"
                      [disabled]="!isEditable[rowIndex]" required />

                    <mat-error class="form-text text-muted danger">This field is required</mat-error>
                  </mat-form-field>
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="itemtype">
                <ng-template let-column="column" ngx-datatable-header-template>
                  <input type="text" class="managetextfilter" placeholder="{{ 'itemtype' | transloco }}"
                    (keyup)="updateFilter($event, 'itemtype')" />
                </ng-template>
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                  <mat-form-field>
                    <input matInput value="itemtype" [(ngModel)]="row.itemtype" #itemtype="ngModel"
                      [disabled]="!isEditable[rowIndex]" />
                    <!-- <small class="form-text text-muted danger"
                      *ngIf="!itemtype.valid && (itemtype.dirty || itemtype.touched)">
                      itemtype is required!
                    </small> -->
                  </mat-form-field>
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="netweight">
                <ng-template let-column="column" ngx-datatable-header-template>
                  <input type="text" class="managetextfilter" placeholder="{{ 'netweight' | transloco }}"
                    (keyup)="updateFilter($event, 'netweight')" />
                </ng-template>
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                  <mat-form-field>
                    <input matInput value="netweight" [(ngModel)]="row.netweight" #netweight="ngModel"
                      [disabled]="!isEditable[rowIndex]" required />

                    <mat-error class="form-text text-muted danger">This field is required</mat-error>
                  </mat-form-field>
                </ng-template>
              </ngx-datatable-column>

              <!-- <ngx-datatable-column name="uom">
                <ng-template let-column="column" ngx-datatable-header-template>
                  <input
                    type="text"
                    class="managetextfilter"
                    placeholder="{{ 'uom' | transloco }}"
                    (keyup)="updateFilter($event, 'uom')"
                  />
                </ng-template>
                <ng-template
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                  let-value="value"
                  let-row="row"
                >
                  <mat-form-field>
                    <input matInput value="uom" [(ngModel)]="row.uom" #uom="ngModel"
                    [disabled]="!isEditable[rowIndex]" required />
                  <small class="form-text text-muted danger"
                    *ngIf="!uom.valid && (uom.dirty || uom.touched)">
                    uom is required!
                  </small>
                  </mat-form-field>
                </ng-template>
              </ngx-datatable-column> -->

              <ngx-datatable-column name="Action">
                <ng-template let-value="value" let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                  <div class="btn-group mr-2">
                    <!-- Pencil icon -->
                    <button md-icon-button class="fa fa-pencil datatable-btn" title="Modify"
                      *ngIf="!this.isEditable[rowIndex]" (click)="
                        this.isEditable[rowIndex] = !this.isEditable[rowIndex]
                      "></button>
                  </div>

                  <div class="btn-group mr-2">
                    <button md-icon-button class="btn btn-danger btn-fab" title="Delete"
                      *ngIf="!this.isEditable[rowIndex]" (click)="deleteItem(row.itemno); this.isUpdateMode = true">
                      <i class="fa fa-trash datatable-btn"></i>
                    </button>
                  </div>

                  <!-- Save/Delete icons -->
                  <div class="btn-group mr-2">
                    <button md-icon-button title="Save" class="fa fa-floppy-o datatable-btn"
                      *ngIf="this.isEditable[rowIndex]" (click)="save(row, rowIndex)">
                      <!-- <i class="fa fa-floppy-o"></i> -->
                    </button>

                    <button md-icon-button class="fa fa-close datatable-btn" title="Delete"
                      *ngIf="this.isEditable[rowIndex]" (click)="delete(row, rowIndex)"></button>
                  </div>
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
            <!-- </form> -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>